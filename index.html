<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/htmx.org@1.9.6"></script>
    <script src="sus.js"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/debug.js"></script>
</head>
<body>
    <header>
        <h1>Dashboard</h1>
    </header>
    <div id="fast">
        <div class="fast-data">
            <h2>Speed: </h2>
            <h1 id="live-speed">80</h1>
        </div>
        <div class="fast-data">
            <h2>RPM: </h2>
            <h1 id="live-RPM">4800</h1>
        </div>
        <div class="fast-data">
            <h2>Intake Temp:</h2>
            <h1 id="live-intake">40</h1>
        </div>
    </div>
    <div id="graphs">
        <div id="live-graph">
            <iframe id="live-source" class="graph" src="http://127.0.0.1:5550/oil_graph" frameborder="0"></iframe>
        </div>
        <div id="but-ar">
            <script>
                function updateFrame(new_url) {
                    document.getElementById('live-source').contentWindow.location = `http://127.0.0.1:5550/${new_url}`
                }
            </script>
            <button class="graph-switch" onclick="updateFrame('oil_graph')" >Oil Temp</button>
            <button class="graph-switch" onclick="updateFrame('coolant_graph')" >Coolant Temp</button>
            <button class="graph-switch" onclick="updateFrame('oil_graph')">Intake Temp</button>
            <button class="graph-switch" onclick="updateFrame('oil_graph')">Fuel Consumption</button>
            <button class="graph-switch" onclick="updateFrame('oil_graph')">Fuel Pressure</button>
            <button class="graph-switch" onclick="updateFrame('oil_graph')">Airflow Rate</button>
            <button class="graph-switch" onclick="updateFrame('oil_graph')">Speed</button>
            <button class="graph-switch" onclick="updateFrame('oil_graph')">Throttle Position</button>
        </div>
    </div>
    <div id="scan">
        <script>
            function genCodeArea() {
                let pr = document.getElementById('code-area');
                pr.innerHTML = '';
                let genAc = document.createElement('IFRAME');
                genAc.src = `http://127.0.0.1:5550/obd_scan`;
                genAc.style.width = "1250px";
                genAc.style.height = "648px";
                genAc.style.borderRadius = "20px";
                pr.appendChild(genAc);
                }
        </script>
        <button class="scan-but" onclick="genCodeArea()">Scan For Codes</button>
        <div id="code-area">
            
        </div>
    </div>
</body>
</html>